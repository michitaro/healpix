(()=>{"use strict";var n={287:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleCanvas=void 0;var r=function(){function n(n,t,r,e,i,a){void 0===a&&(a=0),this.el=n,this.ctx=n.getContext("2d");var o=r-t,u=i-e;this.minX=t-o*a,this.maxX=r+o*a,this.minY=e-u*a,this.maxY=i+u*a}return n.prototype.clear=function(){this.ctx.clearRect(0,0,this.el.width,this.el.height)},n.prototype.world2screen=function(n,t){var r=this.ctx.canvas.width,e=this.ctx.canvas.height;return[r*((n-this.minX)/(this.maxX-this.minX)),e*(1-(t-this.minY)/(this.maxY-this.minY))]},n.prototype.onmousemove=function(n){var t=this;this.el.addEventListener("mousemove",(function(r){var e=t.el.getBoundingClientRect(),i=e.left,a=e.top,o=e.width,u=e.height,c=(r.clientX-i)/o*(t.maxX-t.minX)+t.minX,f=(1-(r.clientY-a)/u)*(t.maxY-t.minY)+t.minY;n(c,f)}))},n}();t.SimpleCanvas=r},780:(n,t)=>{function r(n,t){var r=R(n,t);return function(n,t,r,e){var i=Math.floor(t/4),a=(i+2)*n-(r+e)-1;if(a<n)return 2*a*(a-1)+a*(t%4)+n-e-1;if(a<3*n)return 2*n*(n-1)+4*(a-n)*n+(((t%4*2-i%2+1)*n+(r-e)+8*n)%(8*n)>>1);var o=4*n-a;return 12*n*n-2*o*(o-1)-(4*o-(4*o-o*(3-t%4)-e)+1)}(n,r.f,r.x,r.y)}function e(n,t){if(1==n)return t;var r=i(n,t);return k(n,r.f,r.x,r.y)}function i(n,t){var r=2*n*(n-1);if(t<r){var e=t-2*(h=Math.floor((Math.sqrt(1+2*t)+1)/2))*(h-1);return{f:Math.floor(e/h),x:n-h+(v=e%h),y:n-1-v}}if(t<r+8*n*n){var i=4*n,a=(e=(v=t-r)%i*2+((h=n-Math.floor(v/i))%2==0?1:0))-4*n,o=h+5*n-1,u=(o+a)/2,c=(o-a)/2,f=Math.floor(u/n),s=Math.floor(c/n);return{f:4*(5-(f+s))+(f-s+4>>1)%4,x:u%n,y:c%n}}var h,v,x=12*n*n-t-1;return e=x-2*(h=Math.floor((Math.sqrt(1+2*x)+1)/2))*(h-1),{f:11-Math.floor(e/h),x:h-(v=e%h)-1,y:v}}function a(n,t){var r=R(n,t),e=B(n,r.f,r.x,r.y),i=X(e.t,e.u);return C(i.z,i.a)}function o(n,t){var r=R(n,t),e=B(n,r.f,r.x,r.y),i=X(e.t,e.u),a=i.z,o=i.a;return{theta:Math.acos(a),phi:o}}function u(n,t,r,e){if(r>b)throw new Error("query_disc: radius must < PI/2");var i=c(n),o=z/n,u=Y(t[0],t[1],t[2]),s=u.z,v=u.a,d=Math.sqrt(1-s*s),M=Math.cos(r),l=Math.sin(r),p=s*M-d*l,_=I(s*M+d*l,0).u,g=I(p,0).u,y=d*M-s*l<0,m=d*M+s*l<0,q=Math.floor((b-_)/o),P=Math.floor((b-g)/o+1);if(y){++q;for(var w=1;w<=q;++w)x(n,w,e);++q}if(0==q&&(x(n,1,e),q=2),m){for(w=--P;w<=4*n-1;++w)x(n,w,e);--P}P==4*n&&(x(n,4*n-1,e),P=4*n-2);var X=Math.acos(s);for(w=q;w<=P;++w)h(n,w,v,X,r+i,(function(o){f(a(n,o),t)<=r+i&&e(o)}))}function c(n){var t=z/n;return f(s(t,n*t),s(t,(n+1)*t))}function f(n,t){return 2*Math.asin(Math.sqrt(function(n,t){var r=n[0]-t[0],e=n[1]-t[1],i=n[2]-t[2];return r*r+e*e+i*i}(n,t))/2)}function s(n,t){var r=X(n,t);return C(r.z,r.a)}function h(n,t,r,e,i,a){if(e<i||e+i>q)return x(n,t,a);var o=z*(2-t/n),u=X(z,o).z,c=Math.sin(e),f=Math.cos(e),s=Math.sin(i),h=Math.cos(i),l=Math.atan2(Math.sqrt(-L(u-f*h)/(L(c)*s*s)+1)*s,(-u*f+h)/c);if(l>=q)return x(n,t,a);for(var p=v(n,t,I(u,y(r-l,m)).t),_=v(n,t,I(u,y(r+l,m)).t),b=g(n,p,o),P=M(n,g(n,_,o)),w=b;!d(w,P);w=M(n,w))a(k(n,w.f,w.x,w.y))}function v(n,t,r){var e=z/n;return(r=1+((r/=e)+t%2>>1<<1)-t%2)*e}function x(n,t,r){var e=g(n,z*(1+(1-t%2)/n),z*(2-t/n)),i=e;do{r(k(n,i.f,i.x,i.y)),i=M(n,i)}while(!d(i,e))}function d(n,t){return n.x==t.x&&n.y==t.y&&n.f==t.f}function M(n,t){var r=t.f,e=t.x,i=t.y;if(++e==n)switch(Math.floor(r/4)){case 0:r=(r+1)%4,e=i,i=n;break;case 1:r-=4,e=0;break;case 2:r=4+(r+1)%4,e=0}if(-1==--i)switch(Math.floor(r/4)){case 0:r=4+(r+1)%4,i=n-1;break;case 1:r+=4,i=n-1;break;case 2:r=8+(r+1)%4,i=e-1,e=0}return{f:r,x:e,y:i}}function l(n,t){for(var r=R(n,t),e=B(n,r.f,r.x,r.y),i=e.t,a=e.u,o=z/n,u=[],c=0,f=[[0,o],[-o,0],[0,-o],[o,0]];c<f.length;c++){var s=f[c],h=X(i+s[0],a+s[1]),v=h.z,x=h.a;u.push(C(v,x))}return u}function p(n,t,r,e){var i=R(n,t),a=B(n,i.f,i.x,i.y),o=a.t,u=a.u,c=z/n,f=X(o+c*(r-e),u+c*(r+e-1));return C(f.z,f.a)}function _(n,t,r){var e=I(t,r),i=g(n,e.t,e.u);return k(n,i.f,i.x,i.y)}function g(n,t,r){var e=function(n,t){t/=z,n=y(n/=z,8);var r=O(((t+=5)+(n+=-4))/2,0,5),e=Math.floor(r),i=O((t-n)/2,3-e,6-e),a=Math.floor(i),o=5-(e+a);return o<0?{f:0,p:1,q:1}:{f:4*o+(e-a+4>>1)%4,p:r%1,q:i%1}}(t,r),i=e.f,a=e.p,o=e.q;return{f:i,x:O(Math.floor(n*a),0,n-1),y:O(Math.floor(n*o),0,n-1)}}function y(n,t){return n<0?t- -n%t:n%t}Object.defineProperty(t,"__esModule",{value:!0}),t.uniq2orderpix=t.orderpix2uniq=t.fxy2tu=t.bit_decombine=t.bit_combine=t.fxy2nest=t.vec2ang=t.ang2vec=t.tu2za=t.za2tu=t.tu2fxy=t.pixcoord2vec_ring=t.pixcoord2vec_nest=t.nside2resol=t.nside2pixarea=t.corners_ring=t.corners_nest=t.max_pixrad=t.query_disc_inclusive_ring=t.query_disc_inclusive_nest=t.pix2ang_ring=t.pix2vec_ring=t.pix2ang_nest=t.pix2vec_nest=t.ring2fxy=t.ring2nest=t.nest2ring=t.ang2pix_ring=t.ang2pix_nest=t.vec2pix_ring=t.vec2pix_nest=t.nside2npix=t.nside2order=t.order2nside=void 0,t.order2nside=function(n){return 1<<n},t.nside2order=function(n){return function(n){for(var t=-1;n>0;)n>>=1,++t;return t}(n)},t.nside2npix=function(n){return 12*n*n},t.vec2pix_nest=function(n,t){var r=Y(t[0],t[1],t[2]);return _(n,r.z,r.a)},t.vec2pix_ring=function(n,t){var e=Y(t[0],t[1],t[2]);return r(n,_(n,e.z,e.a))},t.ang2pix_nest=function(n,t,r){return _(n,Math.cos(t),r)},t.ang2pix_ring=function(n,t,e){return r(n,_(n,Math.cos(t),e))},t.nest2ring=r,t.ring2nest=e,t.ring2fxy=i,t.pix2vec_nest=a,t.pix2ang_nest=o,t.pix2vec_ring=function(n,t){return a(n,e(n,t))},t.pix2ang_ring=function(n,t){return o(n,e(n,t))},t.query_disc_inclusive_nest=u,t.query_disc_inclusive_ring=function(n,t,e,i){return u(n,t,e,(function(t){i(r(n,t))}))},t.max_pixrad=c,t.corners_nest=l,t.corners_ring=function(n,t){return l(n,e(n,t))},t.nside2pixarea=function(n){return q/(3*n*n)},t.nside2resol=function(n){return Math.sqrt(q/3)/n},t.pixcoord2vec_nest=p,t.pixcoord2vec_ring=function(n,t,r,i){return p(n,e(n,t),r,i)},t.tu2fxy=g;var m=2*Math.PI,q=Math.PI,b=Math.PI/2,z=Math.PI/4,P=Math.PI/8;function w(n){return n<0?-w(-n):2-Math.sqrt(3*(1-n))}function I(n,t){if(Math.abs(n)<=2/3)return{t,u:3*P*n};var r=t%b,e=w(n);return{t:t-(Math.abs(e)-1)*(r-z),u:z*e}}function X(n,t){var r=Math.abs(t);if(r>=b)return{z:j(t),a:0};if(r<=Math.PI/4)return{z:8/(3*q)*t,a:i=n};var e=n%(Math.PI/2),i=n-(r-z)/(r-b)*(e-z);return{z:j(t)*(1-1/3*L(2-4*r/q)),a:i}}function Y(n,t,r){var e=n*n+t*t;if(0==e)return{z:r<0?-1:1,a:0};var i=(Math.atan2(t,n)+m)%m;return{z:r/=Math.sqrt(r*r+e),a:i}}function C(n,t){var r=Math.sqrt(1-n*n);return[r*Math.cos(t),r*Math.sin(t),n]}function k(n,t,r,e){return t*n*n+S(r,e)}function S(n,t){return T(n<65536),T(t<32768),1&n|(2&n|1&t)<<1|(4&n|2&t)<<2|(8&n|4&t)<<3|(16&n|8&t)<<4|(32&n|16&t)<<5|(64&n|32&t)<<6|(128&n|64&t)<<7|(256&n|128&t)<<8|(512&n|256&t)<<9|(1024&n|512&t)<<10|(2048&n|1024&t)<<11|(4096&n|2048&t)<<12|(8192&n|4096&t)<<13|(16384&n|8192&t)<<14|(32768&n|16384&t)<<15|t&32768<<16}function E(n){return T(n<=2147483647),{x:(1&n)>>0|(4&n)>>1|(16&n)>>2|(64&n)>>3|(256&n)>>4|(1024&n)>>5|(4096&n)>>6|(16384&n)>>7|(65536&n)>>8|(262144&n)>>9|(1048576&n)>>10|(4194304&n)>>11|(16777216&n)>>12|(67108864&n)>>13|(268435456&n)>>14|(1073741824&n)>>15,y:(2&n)>>1|(8&n)>>2|(32&n)>>3|(128&n)>>4|(512&n)>>5|(2048&n)>>6|(8192&n)>>7|(32768&n)>>8|(131072&n)>>9|(524288&n)>>10|(2097152&n)>>11|(8388608&n)>>12|(33554432&n)>>13|(134217728&n)>>14|(536870912&n)>>15}}function R(n,t){var r=n*n,e=Math.floor(t/r),i=E(t%r);return{f:e,x:i.x,y:i.y}}function B(n,t,r,e){var i=Math.floor(t/4);return{t:((t%4*2-i%2+1)*n+(r-e)+8*n)/n*z,u:b-((i+2)*n-(r+e)-1)/n*z}}t.za2tu=I,t.tu2za=X,t.ang2vec=function(n,t){return C(Math.cos(n),t)},t.vec2ang=function(n){var t=Y(n[0],n[1],n[2]),r=t.z,e=t.a;return{theta:Math.acos(r),phi:e}},t.fxy2nest=k,t.bit_combine=S,t.bit_decombine=E,t.fxy2tu=B,t.orderpix2uniq=function(n,t){return 4*((1<<2*n)-1)+t},t.uniq2orderpix=function(n){T(n<=2147483647);for(var t=0,r=1+(n>>2);r>=4;)r>>=2,++t;return{order:t,ipix:n-((1<<2*t)-1<<2)}};var j=Math.sign||function(n){return n>0?1:n<0?-1:0};function L(n){return n*n}function O(n,t,r){return n<t?t:n>r?r:n}function T(n){console.assert(n)}}},t={};function r(e){var i=t[e];if(void 0!==i)return i.exports;var a=t[e]={exports:{}};return n[e](a,a.exports,r),a.exports}(()=>{var n=r(780),t=r(287),e=Math.PI,i=Math.PI/8;function a(t,r,e,i){void 0===i&&(i=4);var a=n.pixcoord2vec_nest(r,e,0,0),u=Math.atan2(a[1],a[0]),c=function(n,r){var e=t.world2screen(n,r),i=e[0],a=e[1];t.ctx.lineTo(i,a)};function f(n){return function(n,t,r){return n<1e-9?1e-9:n>r?r:n}(n,0,1-1e-9)}for(var s=0;s<i;++s){var h=s/i,v=o(n.pixcoord2vec_nest(r,e,f(h),f(0)),a),x=v[0],d=v[1],M=v[2];c(Math.atan2(d,x)+u,Math.acos(M))}for(s=0;s<i;++s){var l=s/i,p=o(n.pixcoord2vec_nest(r,e,f(1),f(l)),a);x=p[0],d=p[1],M=p[2],c(Math.atan2(d,x)+u,Math.acos(M))}for(s=0;s<i;++s){h=1-s/i;var _=o(n.pixcoord2vec_nest(r,e,f(h),f(1)),a);x=_[0],d=_[1],M=_[2],c(Math.atan2(d,x)+u,Math.acos(M))}for(s=0;s<i;++s){l=1-s/i;var g=o(n.pixcoord2vec_nest(r,e,f(0),f(l)),a);x=g[0],d=g[1],M=g[2],c(Math.atan2(d,x)+u,Math.acos(M))}}function o(n,t){var r=n[0],e=n[1],i=n[2],a=t[0],o=t[1];return t[2],[r*a+e*o,e*a-r*o,i]}function u(n){var t=n.getBoundingClientRect(),r=t.width,e=t.height;return n.width=r*devicePixelRatio,n.height=e*devicePixelRatio,n}window.addEventListener("load",(function(r){var o=new t.SimpleCanvas(u(document.getElementById("grid")),-e,e,e,0,.05),c=new t.SimpleCanvas(u(document.getElementById("overlay")),-e,e,e,0,.05);!function(t,r){var e=n.nside2npix(64),i=t.ctx;i.strokeStyle="rgba(0, 0, 127, 0.25)";for(var o=0;o<e;++o)i.beginPath(),a(t,64,o),t.ctx.closePath(),i.stroke()}(o),c.onmousemove((function(t,r){t=(t+2*e)%(2*e),c.clear();var o=n.ang2vec(r,t);n.query_disc_inclusive_nest(64,o,i,(function(n){!function(n,t,r){var e=n.ctx;e.beginPath(),e.fillStyle="rgba(255, 0, 0, 0.5)",a(n,64,r,8),e.fill()}(c,0,n)}))}))}))})()})();