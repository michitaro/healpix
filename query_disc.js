(()=>{var t={185:(t,n,r)=>{t.exports=r.p+"query_disc.html"},314:(t,n,r)=>{"use strict";var e=r(780),i=r(287),a=Math.PI,o=Math.PI/8;function u(t,n,r,i){void 0===i&&(i=4);var a=e.pixcoord2vec_nest(n,r,0,0),o=Math.atan2(a[1],a[0]),u=function(n,r){var e=t.world2screen(n,r),i=e[0],a=e[1];t.ctx.lineTo(i,a)};function f(t){return function(t,n,r){return t<1e-9?1e-9:t>r?r:t}(t,0,1-1e-9)}for(var s=0;s<i;++s){var h=s/i,v=c(e.pixcoord2vec_nest(n,r,f(h),f(0)),a),x=v[0],d=v[1],l=v[2];u(Math.atan2(d,x)+o,Math.acos(l))}for(s=0;s<i;++s){var p=s/i,M=c(e.pixcoord2vec_nest(n,r,f(1),f(p)),a);x=M[0],d=M[1],l=M[2],u(Math.atan2(d,x)+o,Math.acos(l))}for(s=0;s<i;++s){h=1-s/i;var g=c(e.pixcoord2vec_nest(n,r,f(h),f(1)),a);x=g[0],d=g[1],l=g[2],u(Math.atan2(d,x)+o,Math.acos(l))}for(s=0;s<i;++s){p=1-s/i;var _=c(e.pixcoord2vec_nest(n,r,f(0),f(p)),a);x=_[0],d=_[1],l=_[2],u(Math.atan2(d,x)+o,Math.acos(l))}}function c(t,n){var r=t[0],e=t[1],i=t[2],a=n[0],o=n[1];return n[2],[r*a+e*o,e*a-r*o,i]}function f(t){var n=t.getBoundingClientRect(),r=n.width,e=n.height;return t.width=r*devicePixelRatio,t.height=e*devicePixelRatio,t}window.addEventListener("load",(function(t){var n=new i.SimpleCanvas(f(document.getElementById("grid")),-a,a,a,0,.05),r=new i.SimpleCanvas(f(document.getElementById("overlay")),-a,a,a,0,.05);!function(t,n){var r=e.nside2npix(64),i=t.ctx;i.strokeStyle="rgba(0, 0, 127, 0.25)";for(var a=0;a<r;++a)i.beginPath(),u(t,64,a),t.ctx.closePath(),i.stroke()}(n),r.onmousemove((function(t,n){t=(t+2*a)%(2*a),r.clear();var i=e.ang2vec(n,t);e.query_disc_inclusive_nest(64,i,o,(function(t){!function(t,n,r){var e=t.ctx;e.beginPath(),e.fillStyle="rgba(255, 0, 0, 0.5)",u(t,64,r,8),e.fill()}(r,0,t)}))}))}))},287:(t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SimpleCanvas=void 0;var r=function(){function t(t,n,r,e,i,a){void 0===a&&(a=0),this.el=t,this.ctx=t.getContext("2d");var o=r-n,u=i-e;this.minX=n-o*a,this.maxX=r+o*a,this.minY=e-u*a,this.maxY=i+u*a}return t.prototype.clear=function(){this.ctx.clearRect(0,0,this.el.width,this.el.height)},t.prototype.world2screen=function(t,n){var r=this.ctx.canvas.width,e=this.ctx.canvas.height;return[r*((t-this.minX)/(this.maxX-this.minX)),e*(1-(n-this.minY)/(this.maxY-this.minY))]},t.prototype.onmousemove=function(t){var n=this;this.el.addEventListener("mousemove",(function(r){var e=n.el.getBoundingClientRect(),i=e.left,a=e.top,o=e.width,u=e.height,c=(r.clientX-i)/o*(n.maxX-n.minX)+n.minX,f=(1-(r.clientY-a)/u)*(n.maxY-n.minY)+n.minY;t(c,f)}))},t}();n.SimpleCanvas=r},780:(t,n)=>{"use strict";function r(t,n){var r=B(t,n);return function(t,n,r,e){var i=Math.floor(n/4),a=(i+2)*t-(r+e)-1;if(a<t)return 2*a*(a-1)+a*(n%4)+t-e-1;if(a<3*t)return 2*t*(t-1)+4*(a-t)*t+(((n%4*2-i%2+1)*t+(r-e)+8*t)%(8*t)>>1);var o=4*t-a;return 12*t*t-2*o*(o-1)-(4*o-(4*o-o*(3-n%4)-e)+1)}(t,r.f,r.x,r.y)}function e(t,n){if(1==t)return n;var r=i(t,n);return C(t,r.f,r.x,r.y)}function i(t,n){var r=2*t*(t-1);if(n<r){var e=n-2*(h=Math.floor((Math.sqrt(1+2*n)+1)/2))*(h-1);return{f:Math.floor(e/h),x:t-h+(v=e%h),y:t-1-v}}if(n<r+8*t*t){var i=4*t,a=(e=(v=n-r)%i*2+((h=t-Math.floor(v/i))%2==0?1:0))-4*t,o=h+5*t-1,u=(o+a)/2,c=(o-a)/2,f=Math.floor(u/t),s=Math.floor(c/t);return{f:4*(5-(f+s))+(f-s+4>>1)%4,x:u%t,y:c%t}}var h,v,x=12*t*t-n-1;return e=x-2*(h=Math.floor((Math.sqrt(1+2*x)+1)/2))*(h-1),{f:11-Math.floor(e/h),x:h-(v=e%h)-1,y:v}}function a(t,n){var r=B(t,n),e=R(t,r.f,r.x,r.y),i=S(e.t,e.u);return Y(i.z,i.a)}function o(t,n){var r=B(t,n),e=R(t,r.f,r.x,r.y),i=S(e.t,e.u),a=i.z,o=i.a;return{theta:Math.acos(a),phi:o}}function u(t,n,r,e){if(r>w)throw new Error("query_disc: radius must < PI/2");var i=c(t),o=q/t,u=X(n[0],n[1],n[2]),s=u.z,v=u.a,d=Math.sqrt(1-s*s),l=Math.cos(r),p=Math.sin(r),M=s*l-d*p,g=I(s*l+d*p,0).u,_=I(M,0).u,y=d*l-s*p<0,m=d*l+s*p<0,b=Math.floor((w-g)/o),z=Math.floor((w-_)/o+1);if(y){++b;for(var P=1;P<=b;++P)x(t,P,e);++b}if(0==b&&(x(t,1,e),b=2),m){for(P=--z;P<=4*t-1;++P)x(t,P,e);--z}z==4*t&&(x(t,4*t-1,e),z=4*t-2);var S=Math.acos(s);for(P=b;P<=z;++P)h(t,P,v,S,r+i,(function(o){f(a(t,o),n)<=r+i&&e(o)}))}function c(t){var n=q/t;return f(s(n,t*n),s(n,(t+1)*n))}function f(t,n){return 2*Math.asin(Math.sqrt(function(t,n){var r=t[0]-n[0],e=t[1]-n[1],i=t[2]-n[2];return r*r+e*e+i*i}(t,n))/2)}function s(t,n){var r=S(t,n);return Y(r.z,r.a)}function h(t,n,r,e,i,a){if(e<i||e+i>b)return x(t,n,a);var o=q*(2-n/t),u=S(q,o).z,c=Math.sin(e),f=Math.cos(e),s=Math.sin(i),h=Math.cos(i),p=Math.atan2(Math.sqrt(-T(u-f*h)/(T(c)*s*s)+1)*s,(-u*f+h)/c);if(p>=b)return x(t,n,a);for(var M=v(t,n,I(u,y(r-p,m)).t),g=v(t,n,I(u,y(r+p,m)).t),w=_(t,M,o),z=l(t,_(t,g,o)),P=w;!d(P,z);P=l(t,P))a(C(t,P.f,P.x,P.y))}function v(t,n,r){var e=q/t;return(r=1+((r/=e)+n%2>>1<<1)-n%2)*e}function x(t,n,r){var e=_(t,q*(1+(1-n%2)/t),q*(2-n/t)),i=e;do{r(C(t,i.f,i.x,i.y)),i=l(t,i)}while(!d(i,e))}function d(t,n){return t.x==n.x&&t.y==n.y&&t.f==n.f}function l(t,n){var r=n.f,e=n.x,i=n.y;if(++e==t)switch(Math.floor(r/4)){case 0:r=(r+1)%4,e=i,i=t;break;case 1:r-=4,e=0;break;case 2:r=4+(r+1)%4,e=0}if(-1==--i)switch(Math.floor(r/4)){case 0:r=4+(r+1)%4,i=t-1;break;case 1:r+=4,i=t-1;break;case 2:r=8+(r+1)%4,i=e-1,e=0}return{f:r,x:e,y:i}}function p(t,n){for(var r=B(t,n),e=R(t,r.f,r.x,r.y),i=e.t,a=e.u,o=q/t,u=[],c=0,f=[[0,o],[-o,0],[0,-o],[o,0]];c<f.length;c++){var s=f[c],h=S(i+s[0],a+s[1]),v=h.z,x=h.a;u.push(Y(v,x))}return u}function M(t,n,r,e){var i=B(t,n),a=R(t,i.f,i.x,i.y),o=a.t,u=a.u,c=q/t,f=S(o+c*(r-e),u+c*(r+e-1));return Y(f.z,f.a)}function g(t,n,r){var e=I(n,r),i=_(t,e.t,e.u);return C(t,i.f,i.x,i.y)}function _(t,n,r){var e=function(t,n){n/=q,t=y(t/=q,8);var r=$(((n+=5)+(t+=-4))/2,0,5),e=Math.floor(r),i=$((n-t)/2,3-e,6-e),a=Math.floor(i),o=5-(e+a);return o<0?{f:0,p:1,q:1}:{f:4*o+(e-a+4>>1)%4,p:r%1,q:i%1}}(n,r),i=e.f,a=e.p,o=e.q;return{f:i,x:$(Math.floor(t*a),0,t-1),y:$(Math.floor(t*o),0,t-1)}}function y(t,n){return t<0?n- -t%n:t%n}Object.defineProperty(n,"__esModule",{value:!0}),n.uniq2orderpix=n.orderpix2uniq=n.fxy2tu=n.bit_decombine=n.bit_combine=n.fxy2nest=n.vec2ang=n.ang2vec=n.tu2za=n.za2tu=n.tu2fxy=n.pixcoord2vec_ring=n.pixcoord2vec_nest=n.nside2resol=n.nside2pixarea=n.corners_ring=n.corners_nest=n.max_pixrad=n.query_disc_inclusive_ring=n.query_disc_inclusive_nest=n.pix2ang_ring=n.pix2vec_ring=n.pix2ang_nest=n.pix2vec_nest=n.ring2fxy=n.ring2nest=n.nest2ring=n.ang2pix_ring=n.ang2pix_nest=n.vec2pix_ring=n.vec2pix_nest=n.nside2npix=n.nside2order=n.order2nside=void 0,n.order2nside=function(t){return 1<<t},n.nside2order=function(t){return function(t){for(var n=-1;t>0;)t>>=1,++n;return n}(t)},n.nside2npix=function(t){return 12*t*t},n.vec2pix_nest=function(t,n){var r=X(n[0],n[1],n[2]);return g(t,r.z,r.a)},n.vec2pix_ring=function(t,n){var e=X(n[0],n[1],n[2]);return r(t,g(t,e.z,e.a))},n.ang2pix_nest=function(t,n,r){return g(t,Math.cos(n),r)},n.ang2pix_ring=function(t,n,e){return r(t,g(t,Math.cos(n),e))},n.nest2ring=r,n.ring2nest=e,n.ring2fxy=i,n.pix2vec_nest=a,n.pix2ang_nest=o,n.pix2vec_ring=function(t,n){return a(t,e(t,n))},n.pix2ang_ring=function(t,n){return o(t,e(t,n))},n.query_disc_inclusive_nest=u,n.query_disc_inclusive_ring=function(t,n,e,i){return u(t,n,e,(function(n){i(r(t,n))}))},n.max_pixrad=c,n.corners_nest=p,n.corners_ring=function(t,n){return p(t,e(t,n))},n.nside2pixarea=function(t){return b/(3*t*t)},n.nside2resol=function(t){return Math.sqrt(b/3)/t},n.pixcoord2vec_nest=M,n.pixcoord2vec_ring=function(t,n,r,i){return M(t,e(t,n),r,i)},n.tu2fxy=_;var m=2*Math.PI,b=Math.PI,w=Math.PI/2,q=Math.PI/4,z=Math.PI/8;function P(t){return t<0?-P(-t):2-Math.sqrt(3*(1-t))}function I(t,n){if(Math.abs(t)<=2/3)return{t:n,u:3*z*t};var r=n%w,e=P(t);return{t:n-(Math.abs(e)-1)*(r-q),u:q*e}}function S(t,n){var r=Math.abs(n);if(r>=w)return{z:j(n),a:0};if(r<=Math.PI/4)return{z:8/(3*b)*n,a:i=t};var e=t%(Math.PI/2),i=t-(r-q)/(r-w)*(e-q);return{z:j(n)*(1-1/3*T(2-4*r/b)),a:i}}function X(t,n,r){var e=t*t+n*n;if(0==e)return{z:r<0?-1:1,a:0};var i=(Math.atan2(n,t)+m)%m;return{z:r/=Math.sqrt(r*r+e),a:i}}function Y(t,n){var r=Math.sqrt(1-t*t);return[r*Math.cos(n),r*Math.sin(n),t]}function C(t,n,r,e){return n*t*t+E(r,e)}function E(t,n){return L(t<65536),L(n<32768),1&t|(2&t|1&n)<<1|(4&t|2&n)<<2|(8&t|4&n)<<3|(16&t|8&n)<<4|(32&t|16&n)<<5|(64&t|32&n)<<6|(128&t|64&n)<<7|(256&t|128&n)<<8|(512&t|256&n)<<9|(1024&t|512&n)<<10|(2048&t|1024&n)<<11|(4096&t|2048&n)<<12|(8192&t|4096&n)<<13|(16384&t|8192&n)<<14|(32768&t|16384&n)<<15|n&32768<<16}function k(t){return L(t<=2147483647),{x:(1&t)>>0|(4&t)>>1|(16&t)>>2|(64&t)>>3|(256&t)>>4|(1024&t)>>5|(4096&t)>>6|(16384&t)>>7|(65536&t)>>8|(262144&t)>>9|(1048576&t)>>10|(4194304&t)>>11|(16777216&t)>>12|(67108864&t)>>13|(268435456&t)>>14|(1073741824&t)>>15,y:(2&t)>>1|(8&t)>>2|(32&t)>>3|(128&t)>>4|(512&t)>>5|(2048&t)>>6|(8192&t)>>7|(32768&t)>>8|(131072&t)>>9|(524288&t)>>10|(2097152&t)>>11|(8388608&t)>>12|(33554432&t)>>13|(134217728&t)>>14|(536870912&t)>>15}}function B(t,n){var r=t*t,e=Math.floor(n/r),i=k(n%r);return{f:e,x:i.x,y:i.y}}function R(t,n,r,e){var i=Math.floor(n/4);return{t:((n%4*2-i%2+1)*t+(r-e)+8*t)/t*q,u:w-((i+2)*t-(r+e)-1)/t*q}}n.za2tu=I,n.tu2za=S,n.ang2vec=function(t,n){return Y(Math.cos(t),n)},n.vec2ang=function(t){var n=X(t[0],t[1],t[2]),r=n.z,e=n.a;return{theta:Math.acos(r),phi:e}},n.fxy2nest=C,n.bit_combine=E,n.bit_decombine=k,n.fxy2tu=R,n.orderpix2uniq=function(t,n){return 4*((1<<2*t)-1)+n},n.uniq2orderpix=function(t){L(t<=2147483647);for(var n=0,r=1+(t>>2);r>=4;)r>>=2,++n;return{order:n,ipix:t-((1<<2*n)-1<<2)}};var j=Math.sign||function(t){return t>0?1:t<0?-1:0};function T(t){return t*t}function $(t,n,r){return t<n?n:t>r?r:t}function L(t){console.assert(t)}}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var n=r.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var e=n.getElementsByTagName("script");e.length&&(t=e[e.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),r(314),r(185)})();